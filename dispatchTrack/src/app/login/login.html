<!-- Header -->
<div class="navbar-wrapper">
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm rounded-pill px-4 py-2 d-flex align-items-center justify-content-between">
    <a class="navbar-brand fw-bold fs-3 text-primary" href="#">
      <span class="logo-icon me-2"></span> DispatchTrack
    </a>
    
    <div class="auth-buttons d-flex gap-3 align-items-center">
      <span>Don't have an account?</span>

      <a class="btn btn-primary rounded-pill px-4 py-2 fw-bold shadow-sm" (click)="goToSignUp()">Sign Up</a>
    </div>
  </nav>
</div>

<div class="component-container">
  <!-- Hero Section -->
  

  <!-- Main Content -->
  <div class="component-content">
    <div class="login-center-container">
      <div class="login-logo">
      </div>
      <div class="login-content">
        <div class="login-header">
          <h2>Sign in to your account</h2>
          <p>Enter your credentials to access your DispatchTrack account</p>
        </div>
        
        <!-- Login Form -->
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" autocomplete="off" class="login-form" *ngIf="!showForgotPassword">
          <div class="form-field">
            <label for="loginEmail">Email</label>
            <div class="input-wrapper">
              <i class="bi bi-envelope input-icon"></i>
              <input 
                id="loginEmail" 
                type="email" 
                class="component-input" 
                formControlName="email" 
                placeholder="Enter your email"
              >
            </div>
            <div *ngIf="loginForm.get('email')?.invalid && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)" class="form-error">
              <span *ngIf="loginForm.get('email')?.errors?.['required']">Email is required.</span>
              <span *ngIf="loginForm.get('email')?.errors?.['email']">Invalid email format.</span>
            </div>
          </div>
          
          <div class="form-field">
            <label for="loginPassword">Password</label>
            <div class="input-wrapper">
              <i class="bi bi-lock input-icon"></i>
              <input 
                id="loginPassword" 
                [type]="showPassword ? 'text' : 'password'" 
                class="component-input" 
                formControlName="password" 
                placeholder="Enter your password"
              >
              <button type="button" class="password-toggle" (click)="togglePasswordVisibility()">
                <i class="bi" [class.bi-eye]="!showPassword" [class.bi-eye-slash]="showPassword"></i>
              </button>
            </div>
            <div *ngIf="loginForm.get('password')?.invalid && (loginForm.get('password')?.dirty || loginForm.get('password')?.touched)" class="form-error">
              <span *ngIf="loginForm.get('password')?.errors?.['required']">Password is required.</span>
              <span *ngIf="loginForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters.</span>
            </div>
          </div>
          
          <div *ngIf="loginError" class="alert alert-danger">
            <i class="bi bi-exclamation-triangle"></i>{{ loginError }}
          </div>
          
          <button type="submit" class="component-button-primary login-btn" [disabled]="loadingLogin">
            <span *ngIf="loadingLogin" class="loading-spinner"></span>
            {{ loadingLogin ? 'Signing In...' : 'Sign In' }}
          </button>
          
          <div class="form-links">
            <a (click)="toggleForgotPassword()" class="form-link">Forgot Password?</a>
          </div>
        </form>

        <!-- Forgot Password Form -->
        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onForgotPassword()" autocomplete="off" class="login-form" *ngIf="showForgotPassword">
          <div class="form-field">
            <label for="forgotEmail">Email</label>
            <div class="input-wrapper">
              <i class="bi bi-envelope input-icon"></i>
              <input 
                id="forgotEmail" 
                type="email" 
                class="component-input" 
                formControlName="email" 
                placeholder="Enter your email"
              >
            </div>
            <div *ngIf="forgotPasswordForm.get('email')?.invalid && (forgotPasswordForm.get('email')?.dirty || forgotPasswordForm.get('email')?.touched)" class="form-error">
              <span *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">Email is required.</span>
              <span *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">Invalid email format.</span>
            </div>
          </div>
          
          <div *ngIf="forgotPasswordMessage" class="alert" [ngClass]="forgotPasswordMessage.includes('Failed') ? 'alert-danger' : 'alert-success'">
            <i class="bi bi-info-circle"></i>{{ forgotPasswordMessage }}
          </div>
          
          <button type="submit" class="component-button-primary login-btn" [disabled]="loadingForgotPassword">
            <span *ngIf="loadingForgotPassword" class="loading-spinner"></span>
            {{ loadingForgotPassword ? 'Sending...' : 'Send Reset Link' }}
          </button>
          
          <div class="form-links">
            <a (click)="toggleForgotPassword()" class="form-link">Back to Sign In</a>
          </div>
        </form>
        
        <div class="form-footer">
          <span>Don't have an account?</span>
          <a (click)="goToSignUp()" class="form-link">Sign Up</a>
        </div>
      </div>
    </div>
  </div>
</div> 