<div class="swiftgo-dashboard">
  <div class="dashboard-sidebar"></div>
  <div class="dashboard-main-content">
    <!-- Navbar -->
    <nav class="swiftgo-navbar">
      <div class="navbar-inner">
        <div class="navbar-logo" style="flex:0 0 auto;display:flex;align-items:center;">
          <span>DispatchTrack</span>
        </div>
        <div style="flex:1 1 0;display:flex;justify-content:center;">
          <div class="navbar-mode-switch">
            <button class="mode-btn" [class.active]="selectedMode === 'Sender'" (click)="selectedMode = 'Sender'">
              <i class="bi bi-box-seam me-1"></i>Sender
            </button>
            <button class="mode-btn" [class.active]="selectedMode === 'Rider'" (click)="selectedMode = 'Rider'">
              <i class="bi bi-truck me-1"></i>Rider
            </button>
          </div>
        </div>
        <div class="navbar-actions" style="flex:0 0 auto;display:flex;align-items:center;gap:24px;">
          <button class="notif-btn">
            <i class="bi bi-bell"></i>
          </button>
          <div class="navbar-user" style="position:relative;" (mouseenter)="showProfileMenu=true" (mouseleave)="showProfileMenu=false" tabindex="0" (focus)="showProfileMenu=true" (blur)="showProfileMenu=false">
            <span class="user-avatar profile-dropdown-toggle" style="background:#e4e6ea;display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;font-size:20px;cursor:pointer;">
              <i class="bi bi-person"></i>
            </span>
            <span class="user-name">{{ username || '--' }}</span>
            <br>
            <span class="user-mode" style="font-size:12px;color:#888;">{{selectedMode}} Mode</span>
            <div class="profile-dropdown-menu" *ngIf="showProfileMenu" style="position:absolute;top:40px;right:0;min-width:160px;background:#fff;border:1px solid #e0e0e0;box-shadow:0 2px 8px rgba(0,0,0,0.08);border-radius:8px;z-index:1000;">
              <ul style="list-style:none;margin:0;padding:8px 0;">
                <li style="padding:8px 20px;cursor:pointer;white-space:nowrap;" (click)="onProfile()"><i class="bi bi-person me-2"></i>Profile</li>
                <li style="padding:8px 20px;cursor:pointer;white-space:nowrap;" (click)="onSettings()"><i class="bi bi-gear me-2"></i>Settings</li>
                <li style="padding:8px 20px;cursor:pointer;white-space:nowrap;" (click)="onPayments()"><i class="bi bi-credit-card me-2"></i>Payments</li>
                <li style="border-top:1px solid #eee;margin-top:4px;padding:8px 20px;cursor:pointer;white-space:nowrap;" (click)="onSignout()"><i class="bi bi-box-arrow-right me-2"></i>Sign out</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Dashboard Main Grid -->

    <div class="dashboard-grid">
      <!-- Top Row: Quick Actions (left, wide) and Stat Cards (right, 2x2) -->
      <div class="dashboard-top-row">
        <div class="quick-actions-card">
          <div class="card-header"><i class="bi bi-plus-lg me-2"></i>Quick Actions</div>
          <div class="d-flex gap-3 flex-grow-1">
            <button class="quick-btn flex-grow-1" [ngClass]="{'selected': quickActionSelected==='send'}" (click)="quickActionSelected='send'">
              <i class="bi bi-box-seam me-2"></i>Send Package
            </button>
            <button class="quick-btn flex-grow-1" [ngClass]="{'selected': quickActionSelected==='track'}" (click)="quickActionSelected='track'">
              <i class="bi bi-geo-alt me-2"></i>Track Package
            </button>
          </div>
        </div>
        <!-- Stat cards removed as per user request -->
      </div>

      <!-- Second Row: Live Tracking (left, wide) and Recent Activity (right) -->
      <div class="dashboard-middle-row">
        <div class="live-tracking-card">
          <div class="card-header"><i class="bi bi-geo-alt me-2"></i>Live Tracking</div>
          <div id="map" style="height: 420px; width: 100%; border-radius: 18px;"></div>
        </div>
        <div class="recent-activity-card">
          <div class="card-header"><i class="bi bi-clock me-2"></i>Recent Activity</div>
          <ul class="activity-list">
            <!-- Future: Populate with real activity data from API -->
            <li class="activity text-center text-muted" style="width:100%;">No recent activity</li>
          </ul>
        </div>
      </div>

      <!-- Third Row: Profile Card (right, below Recent Activity) -->
      <div class="dashboard-bottom-row">
        <div class="profile-card d-flex flex-row align-items-center gap-3">
          <div class="profile-avatar-wrap">
            <!-- Future: User avatar from API -->
            <img src="" alt="avatar" class="profile-avatar" style="background:#e4e6ea;" />
          </div>
          <div class="profile-info">
            <div class="profile-name fw-bold">--</div>
            <div class="profile-mode text-muted small">--</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard-right-ads"></div>
</div>
